<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="tachyons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,300;0,400;0,600;0,900;1,700&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: black;
            font-family: 'Source Code Pro', monospace;
            color: #1ae843;
        }
        .headline {
            letter-spacing: -0.03em;
        }
        .img1 {
            max-height: 50%;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mental health in tech</title>
</head>
<body>
    <div class="vh-100 w-100 dt cover">
        <h1 class="headline f-headline fw6 lh-title tc">what's mental health like<br>in the tech industry?</h1>
        <p class="tc tagline">We looked at over 1400 responses to the 2016 OSMI Mental Health in Tech survey, and this is what we found.</h3>
    </div>

    <div class="vh-100 w-100 dt ph5">
        <div class="ma0 pa0 typewriter">
            <h2 id="slide-title1" class="f1 fw6">$ the dataset</h2>
        </div>
        <div class="fl w-50 pa4">
            <p class="tr">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque dapibus tincidunt quam ut suscipit. Nam vehicula eleifend enim, vel rhoncus lorem laoreet sit amet. Duis eleifend est sapien, nec lobortis purus lobortis nec. Sed at pretium nibh. Nam tellus nunc, ultrices nec ante non, dignissim pellentesque sapien. Morbi varius vehicula consequat. Curabitur ut auctor dui. Curabitur tincidunt faucibus felis a consequat. Integer eu neque quis est pellentesque auctor et non libero. Duis ut lorem id nibh porttitor posuere vitae ut eros. Nunc euismod ac mi ac scelerisque. In placerat, sem et condimentum accumsan, purus dui lobortis ante, in suscipit lectus magna eu est. Nunc porta tellus id libero tempor dignissim. In et imperdiet nulla. Vestibulum augue nunc, molestie ut pharetra in, tincidunt quis augue.</p>
            <p class="tr">Vivamus porttitor tellus eu ex imperdiet vulputate. Ut vitae leo sed quam viverra semper sit amet eu dui. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Cras nec tincidunt sem, ut tempor dui. Aliquam neque enim, tempus quis augue sed, tempor scelerisque massa. Vestibulum eget orci erat. Sed imperdiet vulputate mauris eu euismod. Vestibulum id euismod sem. Vestibulum fringilla ullamcorper egestas. Aenean ornare suscipit nulla, a maximus arcu egestas id.</p>
        </div>
        <div class="pa4 fl w-50">
            <img class="img1" src="csv.png" alt="" srcset="">
        </div>
    </div>
    <div class="vh-100 w-100 dt ph5">
        <h2 id="slide-title2" class="f1 fw6">$ cleaning the data</h2>
    </div>
    <div class="vh-100 w-100 dt ph5">
        <h2 id="slide-title3" class="f1 fw6">$ our statistical model</h2>
        <div class="pa4 fl w-50">
            <img class="img1" src="ROCplot.png" alt="" srcset="">
        </div>
        <div class="fl w-50 pa4">
            <p class="tl">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque dapibus tincidunt quam ut suscipit. Nam vehicula eleifend enim, vel rhoncus lorem laoreet sit amet. Duis eleifend est sapien, nec lobortis purus lobortis nec. Sed at pretium nibh. Nam tellus nunc, ultrices nec ante non, dignissim pellentesque sapien. Morbi varius vehicula consequat. Curabitur ut auctor dui. Curabitur tincidunt faucibus felis a consequat. Integer eu neque quis est pellentesque auctor et non libero. Duis ut lorem id nibh porttitor posuere vitae ut eros. Nunc euismod ac mi ac scelerisque. In placerat, sem et condimentum accumsan, purus dui lobortis ante, in suscipit lectus magna eu est. Nunc porta tellus id libero tempor dignissim. In et imperdiet nulla. Vestibulum augue nunc, molestie ut pharetra in, tincidunt quis augue.</p>
            <p class="tl">Vivamus porttitor tellus eu ex imperdiet vulputate. Ut vitae leo sed quam viverra semper sit amet eu dui. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Cras nec tincidunt sem, ut tempor dui. Aliquam neque enim, tempus quis augue sed, tempor scelerisque massa. Vestibulum eget orci erat. Sed imperdiet vulputate mauris eu euismod. Vestibulum id euismod sem. Vestibulum fringilla ullamcorper egestas. Aenean ornare suscipit nulla, a maximus arcu egestas id.</p>
        </div>
    </div>

    <script>
        const elemIds = [
            {
                id: "slide-title1", 
                typed: false,
                cursor: false,
                timer: null,
                text: "",
                index: 0
            },
            {
                id: "slide-title2", 
                typed: false,
                cursor: false,
                timer: null,
                text: "",
                index: 0
            },
            {
                id: "slide-title3", 
                typed: false,
                cursor: false,
                timer: null,
                text: "",
                index: 0
            }
        ];
            
        elemIds.forEach( (item, index) => {
            let e = document.getElementById(item.id);
            item.text = e.innerText.split("$")[1];
            e.innerText = "$";
        });

        var cursorVisible = false;
        const typeDelay = 80;
        const blinkInterval = 500;
        document.onscroll = checkAnimations;            

        // let typed = false;
        // let txt = document.getElementById('slide-title1').innerText.split("$")[1];
        // document.getElementById('slide-title1').innerText = "$";

        function checkAnimations() {
            elemIds.forEach( (item, index) => {
                let e = document.getElementById(item.id);
                if(!item.typed && isVisible(e)) {
                    item.typed = true;
                    item.timer = setInterval(typeAnim, typeDelay, item);
                }
            });
        }

        function typeAnim(elemObj) {
            if(elemObj.index < elemObj.text.length) {
                document.getElementById(elemObj.id).innerHTML += elemObj.text.charAt(elemObj.index);
                elemObj.index++;
            } else {
                clearInterval(elemObj.timer);
                setInterval(blinkCursorElem, blinkInterval, elemObj);
            }
        }

        function blinkCursorElem(elemObj) {
            e = document.getElementById(elemObj.id);
            if(isVisible(e)) {
                if(elemObj.cursor) {
                    t = e.innerHTML.slice(0, -1);
                    e.innerHTML = t;
                } else {
                    e.innerHTML += "_";
                }
                elemObj.cursor = !elemObj.cursor;
            }
        }

        function typeAnimation() {

            if(!typed && isVisible(document.getElementById("slide-title1"))) {
                console.log("typing...");
                typed = true;
                var timer = setInterval(type, typeDelay);
            }

            var c = 0;
            function type() {
                if(c <= txt.length) {
                    document.getElementById('slide-title1').innerHTML += txt.charAt(c);
                    console.log(txt.charAt(c));
                    c++;
                } else {
                    console.log("finished");
                    clearInterval(timer);
                    setInterval(blinkCursor, blinkInterval);
                }
            }

            function blinkCursor() {
                if(isVisible(document.getElementById('slide-title1'))) {
                    if(cursorVisible) {
                        txt = document.getElementById('slide-title1').innerHTML.slice(0,-1);
                        document.getElementById('slide-title1').innerHTML = txt;
                    } else {
                        document.getElementById('slide-title1').innerHTML += "_";
                    }
                    cursorVisible = !cursorVisible;
                }
            }
        }

        function isVisible(e) {
            var bounding = e.getBoundingClientRect();
            return (
                bounding.top >= 0 &&
                bounding.left >= 0 &&
                bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                bounding.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }

    </script>
</body>
</html>